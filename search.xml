<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>HexoNext</title>
    <url>/2021/01/15/HexoNext/</url>
    <content><![CDATA[<p><img src="https://pica.zhimg.com/v2-d4c1239e75c02e8482c22017a6c8d407_1440w.jpg?source=172ae18b" alt="GitHub+Hexo 搭建个人网站详细教程"></p>
<h1 id="GitHub-Hexo-搭建个人网站详细教程"><a href="#GitHub-Hexo-搭建个人网站详细教程" class="headerlink" title="GitHub+Hexo 搭建个人网站详细教程"></a>GitHub+Hexo 搭建个人网站详细教程</h1><p><strong>前言：</strong></p>
<p>随着互联网浪潮的翻腾，国内外涌现出越来越多优秀的社交网站让用户分享信息更加便捷。然后，如果你是一个不甘寂寞的程序猿（媛），是否也想要搭建一个属于自己的个人网站，如果你曾经或者现在正有这样的想法，请跟随这篇文章发挥你的Geek精神，让你快速拥有自己的博客网站，写文章记录生活，享受这种从0到1的过程。</p>
<h2 id="什么是Hexo"><a href="#什么是Hexo" class="headerlink" title="什么是Hexo ?"></a><strong>什么是Hexo ?</strong></h2><p><img src="https://pic2.zhimg.com/80/v2-6890485c84748900d9dae824b7f7cbb1_720w.jpg" alt="img"></p>
<p>Hexo是一款基于Node.js的静态博客框架，依赖少易于安装使用，可以方便的生成静态网页托管在GitHub和Heroku上，是搭建博客的首选框架。这里我们选用的是GitHub。Hexo同时也是GitHub上的开源项目，参见：<a href="https://link.zhihu.com/?target=https://github.com/hexojs/hexo">hexojs/hexo</a> 如果想要更加全面的了解Hexo，可以到其官网 <a href="https://link.zhihu.com/?target=https://hexo.io/">Hexo</a> 了解更多的细节，这里，默认各位猿/媛儿都知道GitHub就不再赘述。</p>
<p>下面正式从零开始搭建年轻人的第一个网站。</p>
<h2 id="搭建步骤："><a href="#搭建步骤：" class="headerlink" title="搭建步骤："></a><strong>搭建步骤：</strong></h2><ul>
<li>获得个人网站域名</li>
<li>GitHub创建个人仓库</li>
<li>安装Git</li>
<li>安装Node.js</li>
<li>安装Hexo</li>
<li>推送网站</li>
<li>绑定域名</li>
<li>更换主题</li>
<li>初识MarkDown语法</li>
<li>发布文章</li>
<li>寻找图床</li>
<li>个性化设置</li>
<li>其他</li>
<li>附录</li>
</ul>
<p><strong>获得个人网站域名</strong></p>
<p>域名是网站的入口，也是网站的第一印象，比如饿了么的官网的域名是：<a href="https://link.zhihu.com/?target=https://www.ele.me/">https://www.ele.me/</a> ，很是巧妙。常见的有com,cn,net,org等后缀，也有小众的xyz,me,io等后缀，根据你自己的喜好，选择不同的后缀，比如我选择就是常见的com后缀。很多小众奇特的后缀在大陆是没办法备案的，网站也就无法上线。然而使用GitHub托管我们的网站，完全不需要备案，因为托管我们的网站内容的服务器在美国，而且在国内备案流程也比较繁杂，时间需要一周左右。</p>
<p>申请域名的地方有很多，这里推荐阿里云：<a href="https://link.zhihu.com/?target=https://www.aliyun.com/">阿里云-为了无法计算的价值</a> 申请入口：<a href="https://link.zhihu.com/?target=https://wanwang.aliyun.com/domain/">域名注册</a> 购买域名这也是我们整个搭建过程中惟一一个需要花钱的地方。如果你已经有了空闲域名就无需购买，直接使用即可。</p>
<p><strong>GitHub创建个人仓库</strong></p>
<p>登录到GitHub,如果没有GitHub帐号，使用你的邮箱注册GitHub帐号：<a href="https://link.zhihu.com/?target=https://github.com/">Build software better, together</a> 点击GitHub中的New repository创建新仓库，仓库名应该为：<strong>用户名</strong>.<a href="https://link.zhihu.com/?target=http://github.io">http://github.io</a> 这个<strong>用户名</strong>使用你的GitHub帐号名称代替，这是固定写法，比如我的仓库名为：</p>
<p><img src="https://pic4.zhimg.com/80/v2-832168e58b4ac4ce7c3cca797711d2d3_720w.jpg" alt="img"></p>
<p><strong>安装Git</strong></p>
<p>什么是Git ?简单来说Git是开源的分布式版本控制系统，用于敏捷高效地处理项目。我们网站在本地搭建好了，需要使用Git同步到GitHub上。如果想要了解Git的细节，参看<a href="https://link.zhihu.com/?target=http://weibo.com/liaoxuefeng">廖雪峰</a>老师的Git教程：<a href="https://link.zhihu.com/?target=http://www.liaoxuefeng.com/wiki/0013739516305929606dd18361248578c67b8067c8c017b000">Git教程</a> 从Git官网下载：<a href="https://link.zhihu.com/?target=https://git-scm.com/download/win">Git - Downloading Package</a> 现在的机子基本都是64位的，选择64位的安装包，下载后安装，在命令行里输入git测试是否安装成功，若安装失败，参看其他详细的Git安装教程。安装成功后，将你的Git与GitHub帐号绑定，鼠标右击打开Git Bash</p>
<p><img src="https://pic3.zhimg.com/80/v2-8b1cbe253d6e0301bd9a68c6f98a9f52_720w.jpg" alt="img"></p>
<p>或者在菜单里搜索Git Bash，设置user.name和user.email配置信息：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git config --global user.name <span class="string">&quot;你的GitHub用户名&quot;</span></span><br><span class="line">git config --global user.email <span class="string">&quot;你的GitHub注册邮箱&quot;</span></span><br></pre></td></tr></table></figure>

<p>生成ssh密钥文件：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">ssh-keygen -t rsa -C <span class="string">&quot;你的GitHub注册邮箱&quot;</span></span><br></pre></td></tr></table></figure>

<p>然后直接三个回车即可，默认不需要设置密码<br>然后找到生成的.ssh的文件夹中的id_rsa.pub密钥，将内容全部复制</p>
<p><img src="https://pic4.zhimg.com/80/v2-d1e47103ec1aa8675f68688c5d63bd27_720w.jpg" alt="img"></p>
<p>打开<a href="https://link.zhihu.com/?target=https://github.com/settings/keys">GitHub_Settings_keys</a> 页面，新建new SSH Key</p>
<p><img src="https://pic1.zhimg.com/80/v2-72a3f22c080e99343c3cc4aabce10e3c_720w.jpg" alt="img"></p>
<p>Title为标题，任意填即可，将刚刚复制的id_rsa.pub内容粘贴进去，最后点击Add SSH key。<br>在Git Bash中检测GitHub公钥设置是否成功，输入 ssh <a href="mailto:&#x67;&#105;&#116;&#64;&#103;&#105;&#116;&#104;&#117;&#x62;&#x2e;&#x63;&#111;&#109;">&#x67;&#105;&#116;&#64;&#103;&#105;&#116;&#104;&#117;&#x62;&#x2e;&#x63;&#111;&#109;</a> ：</p>
<p><img src="https://pic3.zhimg.com/80/v2-da481ffa686410becd4186c656b4ebd6_720w.jpg" alt="img"></p>
<p>如上则说明成功。这里之所以设置GitHub密钥原因是，通过非对称加密的公钥与私钥来完成加密，公钥放置在GitHub上，私钥放置在自己的电脑里。GitHub要求每次推送代码都是合法用户，所以每次推送都需要输入账号密码验证推送用户是否是合法用户，为了省去每次输入密码的步骤，采用了ssh，当你推送的时候，git就会匹配你的私钥跟GitHub上面的公钥是否是配对的，若是匹配就认为你是合法用户，则允许推送。这样可以保证每次的推送都是正确合法的。</p>
<p><strong>安装Node.js</strong></p>
<p>Hexo基于Node.js，Node.js下载地址：<a href="https://link.zhihu.com/?target=https://nodejs.org/en/download/">Download | Node.js</a> 下载安装包，注意安装Node.js会包含环境变量及npm的安装，安装后，检测Node.js是否安装成功，在命令行中输入 node -v :</p>
<p><img src="https://pic1.zhimg.com/80/v2-76ea38e9545e606f975781e47933b010_720w.jpg" alt="img"></p>
<p>检测npm是否安装成功，在命令行中输入npm -v :</p>
<p><img src="https://pic2.zhimg.com/80/v2-bede250b8456df92475b455fda8c1dd9_720w.jpg" alt="img"></p>
<p>到这了，安装Hexo的环境已经全部搭建完成。</p>
<p><strong>安装Hexo</strong></p>
<p>Hexo就是我们的个人博客网站的框架， 这里需要自己在电脑常里创建一个文件夹，可以命名为Blog，Hexo框架与以后你自己发布的网页都在这个文件夹中。创建好后，进入文件夹中，按住shift键，右击鼠标点击命令行</p>
<p><img src="https://pic1.zhimg.com/80/v2-a5450a466c0927c25dff8ad6f1d2046c_720w.jpg" alt="img"></p>
<p>使用npm命令安装Hexo，输入：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">npm install -g hexo-cli </span><br></pre></td></tr></table></figure>



<p>这个安装时间较长耐心等待，安装完成后，初始化我们的博客，输入：</p>
<p><strong>（这里要注意了，如果用win10的powershell打开执行，可能报错，因为权限的问题，所以建议用Git Bash执行下面的所有代码）</strong></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">hexo init blog</span><br></pre></td></tr></table></figure>

<p>注意，这里的命令都是作用在刚刚创建的Blog文件夹中。</p>
<p>为了检测我们的网站雏形，分别按顺序输入以下三条命令：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">hexo new test_my_site</span><br><span class="line"></span><br><span class="line">hexo g</span><br><span class="line"></span><br><span class="line">hexo s</span><br></pre></td></tr></table></figure>

<p>这些命令在后面作介绍，完成后，打开浏览器输入地址：</p>
<p>localhost:4000</p>
<p>可以看出我们写出第一篇博客，只不过我下图是我修改过的配置，和你的显示不一样。</p>
<p><img src="https://pic4.zhimg.com/80/v2-123e73c0630d299b1c856d99b04b55bb_720w.jpg" alt="img"></p>
<p>现在来介绍常用的Hexo 命令</p>
<p>npm install hexo -g #安装Hexo<br>npm update hexo -g #升级<br>hexo init #初始化博客</p>
<p>命令简写<br>hexo n “我的博客” == hexo new “我的博客” #新建文章<br>hexo g == hexo generate #生成<br>hexo s == hexo server #启动服务预览<br>hexo d == hexo deploy #部署</p>
<p>hexo server #Hexo会监视文件变动并自动更新，无须重启服务器<br>hexo server -s #静态模式<br>hexo server -p 5000 #更改端口<br>hexo server -i 192.168.1.1 #自定义 IP<br>hexo clean #清除缓存，若是网页正常情况下可以忽略这条命令</p>
<p>刚刚的三个命令依次是新建一篇博客文章、生成网页、在本地预览的操作。</p>
<p><strong>推送网站</strong></p>
<p>上面只是在本地预览，接下来要做的就是就是推送网站，也就是发布网站，让我们的网站可以被更多的人访问。在设置之前，需要解释一个概念，在blog根目录里的_config.yml文件称为<strong>站点</strong>配置文件，如下图</p>
<p><img src="https://pic2.zhimg.com/80/v2-cb1fd5e5a2e73f513234e434724c7c55_720w.jpg" alt="img"></p>
<p>进入根目录里的themes文件夹，里面也有个_config.yml文件，这个称为<strong>主题</strong>配置文件，如下图</p>
<p><img src="https://pic4.zhimg.com/80/v2-4252029e5634bf91c7d58916ae2b8ac3_720w.jpg" alt="img"></p>
<p>下一步将我们的Hexo与GitHub关联起来，打开站点的配置文件_config.yml，翻到最后修改为：</p>
<p>deploy:<br>type: git<br>repo: 这里填入你之前在GitHub上创建仓库的完整路径，记得加上 .git<br>branch: master参考如下：</p>
<p><img src="https://pic1.zhimg.com/80/v2-279ac5149b577f04dc099defbb12eaa8_720w.jpg" alt="img"></p>
<p>保存站点配置文件。</p>
<p>其实就是给hexo d 这个命令做相应的配置，让hexo知道你要把blog部署在哪个位置，很显然，我们部署在我们GitHub的仓库里。最后安装Git部署插件，输入命令：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">npm install hexo-deployer-git --save</span><br></pre></td></tr></table></figure>



<p>这时，我们分别输入三条命令：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">hexo clean </span><br><span class="line">hexo g </span><br><span class="line">hexo d</span><br></pre></td></tr></table></figure>

<p>其实第三条的 hexo d 就是部署网站命令，d是deploy的缩写。完成后，打开浏览器，在地址栏输入你的放置个人网站的仓库路径，即 <a href="https://link.zhihu.com/?target=http://xxxx.github.io">http://xxxx.github.io</a> (知乎排版可能会出现”http://“字样，参考下图) 比如我的xxxx就是我的GitHub用户名：</p>
<p><img src="https://pic1.zhimg.com/80/v2-d750452f4258bf0967d5629ef23d1b10_720w.jpg" alt="img"></p>
<p>你就会发现你的博客已经上线了，可以在网络上被访问了。</p>
<p><strong>绑定域名</strong></p>
<p>虽然在Internet上可以访问我们的网站，但是网址是GitHub提供的:<a href="https://link.zhihu.com/?target=http://xxxx.github.io">http://xxxx.github.io</a> (知乎排版可能会出现”http://“字样) 而我们想使用我们自己的个性化域名，这就需要绑定我们自己的域名。这里演示的是在阿里云万网的域名绑定，在国内主流的域名代理厂商也就阿里云和腾讯云。登录到阿里云，进入管理控制台的域名列表，找到你的个性化域名，进入解析</p>
<p><img src="https://pic3.zhimg.com/80/v2-47323ad4490e206aef93a3d68f0670b6_720w.jpg" alt="img"></p>
<p>然后添加解析</p>
<p><img src="https://pic3.zhimg.com/80/v2-40222b3a295bb692aac22829a8ec3be2_720w.jpg" alt="img"></p>
<p>包括添加三条解析记录，192.30.252.153是GitHub的地址，你也可以ping你的 <a href="https://link.zhihu.com/?target=http://xxxx.github.io">http://xxxx.github.io</a> 的ip地址，填入进去。第三个记录类型是CNAME，CNAME的记录值是：你的用户名.<a href="https://link.zhihu.com/?target=http://github.io">http://github.io</a> 这里千万别弄错了。第二步，登录GitHub，进入之前创建的仓库，点击settings，设置Custom domain，输入你的域名</p>
<p><img src="https://pic4.zhimg.com/80/v2-85ba6dda906f22dea4c03df2b47d994b_720w.jpg" alt="img"></p>
<p>点击save保存。第三步，进入本地博客文件夹 ，进入blog/source目录下，创建一个记事本文件，输入你的域名，对，只要写进你自己的域名即可。如果带有www，那么以后访问的时候必须带有www完整的域名才可以访问，但如果不带有www，以后访问的时候带不带www都可以访问。所以建议，不要带有www。这里我还是写了www(不建议带有www):</p>
<p><img src="https://pic1.zhimg.com/80/v2-79abfff91af3f520e24cb91acf6aa994_720w.jpg" alt="img"></p>
<p>保存，命名为CNAME ，注意保存成<strong>所有文件</strong>而不是<strong>txt文件</strong>。</p>
<p>完成这三步，进入blog目录中，按住shift键右击打开命令行，依次输入：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">hexo clean</span><br><span class="line">hexo g</span><br><span class="line">hexo d</span><br></pre></td></tr></table></figure>

<p>这时候打开浏览器在地址栏输入你的个性化域名将会直接进入你自己搭建的网站。</p>
<p><strong>更换主题</strong></p>
<p>如果你不喜欢Hexo默认的主题，可以更换不同的主题，主题传送门：<a href="https://link.zhihu.com/?target=https://hexo.io/themes/">Themes</a> 我自己使用的是Next主题，可以在blog目录中的themes文件夹中查看你自己主题是什么。现在把默认主题更改成Next主题，在blog目录中（就是命令行的位置处于blog目录）打开命令行输入：（注意next主题有两个版本，下面这个是旧版的）</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git <span class="built_in">clone</span> https://github.com/iissnan/hexo-theme-next themes/next</span><br></pre></td></tr></table></figure>

<p>这是将Next主题下载到blog目录的themes主题下的next文件夹中。打开<strong>站点</strong>的_config.yml配置文件，修改主题为next</p>
<p><img src="https://pic1.zhimg.com/80/v2-b1997377e82408cb15b485c65ae00f70_720w.jpg" alt="img"></p>
<p>打开<strong>主题</strong>的_config.yml配置文件，不是站点主题文件，找到Scheme Settings</p>
<p><img src="https://pic2.zhimg.com/80/v2-1ac152c4aabe4c10b762ee27552f1105_720w.jpg" alt="img"></p>
<p>next主题有三个样式，我用的是Pisces，你们可以自己试试看，选择你自己喜欢的样式（只需要把行首的#去除，#是注释），选择好后，再次部署网站，hexo g、hexo d，查看效果。选择其他主题，按照上述过程即可实现。</p>
<p><strong>初识Markdown语法</strong></p>
<p>Markdown是一种可以使用普通文本编辑器编写的标记语言，通过简单的标记语法，它可以使普通文本内容具有一定的格式。Markdown语法简洁明了、容易掌握，而且功能比纯文本更强，因此写博客使用它，可以让用户更加专注的写文章，而不需要费尽心力的考虑样式，相对于html已经算是轻量级语言，像有道云笔记也支持Markdown写作。并且Markdown完全兼容html，也就是可以在文章里直接插入html代码。比如给博文添加音乐，就可以直接把音乐的外链html代码插入文章中。具体语法参看：<a href="https://link.zhihu.com/?target=http://www.appinn.com/markdown/">Markdown 语法说明(简体中文版)</a> 可以说十分钟就可以入门。当然，工欲善其事必先利其器，选择一个好的Markdown编辑器也是非常重要的，这里推荐Typora ，这是带有预览效果的编辑器，也可以使用本地的文本编辑器，更多的Markdown的语法与编辑器自己可以搜索了解。</p>
<p><strong>发布文章</strong></p>
<p>我们开始正式发布上线博客文章，在命令行中输入：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">hexo n <span class="string">&quot;博客名字&quot;</span></span><br></pre></td></tr></table></figure>



<p>我们会发现在blog根目录下的source文件夹中的_post文件夹中多了一个 <strong>博客名字.md</strong> 文件，使用Markdown编辑器打开，就可以开始你的个人博客之旅了，Markdown常用的样式也就十来种，完全能够满足一般博文的样式要求，这是我的一篇博文内容示例：</p>
<p><img src="https://pic1.zhimg.com/80/v2-4f96cd03a88e68b8ae86c38bfb0808ac_720w.jpg" alt="img"></p>
<p>通过带有预览样式的Markdown编辑器实时预览书写的博文样式，也可以通过命令 hexo s –debug 在本地浏览器的localhost:4000 预览博文效果。写好博文并且样式无误后，通过hexo g、hexo d 生成、部署网页。随后可以在浏览器中输入域名浏览。</p>
<p><strong>寻找图床</strong></p>
<p>图床，当博文中有图片时，若是少量图片，可以直接把图片存放在source文件夹中，但这显然不合理的，因为图片会占据大量的存储的空间，加载的时候相对缓慢 ，这时考虑把博文里的图片上传到某一网站，然后获得外部链接，使用Markdown语法，**<img src="%E5%A4%96%E9%83%A8%E9%93%BE%E6%8E%A5" alt="图片信息">** 完成图片的插入，这种网站就被成为图床。常见的简易的图床网站有：<a href="https://link.zhihu.com/?target=http://www.tietuku.com/">贴图库图片外链</a> 国内算比较好的图床我认为有两个：新浪微博和 <a href="https://link.zhihu.com/?target=https://www.qiniu.com/">七牛云</a> ，七牛云的使用方法可以参看其他文章。图床最重要的就是稳定速度快，所以在挑选图床的时候一定要仔细，下图是博文插入图片，使用图床外链的示例：</p>
<p><img src="https://pic4.zhimg.com/80/v2-92372e522595af139ace5f371aae3ff3_720w.jpg" alt="img"></p>
<p><strong>个性化设置</strong></p>
<p>所谓的个性化设置就是根据个人需要添加不同的插件及功能。</p>
<p>基本的有：</p>
<p>在站点配置文件_config.yml修改基本的站点信息</p>
<p><img src="https://pic4.zhimg.com/80/v2-78bc0e4e6498c9c3cb269b3254d8379f_720w.jpg" alt="img"></p>
<p>依次是网站标题、副标题、网站描述、作者、网站头像外部链接、网站语言、时区等。</p>
<p>在主题配置文件_config.yml修改基本的主题信息，如：</p>
<p><img src="https://pic2.zhimg.com/80/v2-451c5cb2fd6516650ad8ca608031bf0d_720w.jpg" alt="img"></p>
<p>博文打赏的微信、支付宝二维码图片，这里我是直接把这两张放在根目录的source文件夹中，并没有使用图床外链。</p>
<p><img src="https://pic2.zhimg.com/80/v2-69bbc45e973eb6916e08187ed8b33a55_720w.jpg" alt="img"></p>
<p>社交外链的设置，即在侧栏展示你的个人社交网站信息。</p>
<p><img src="https://pic4.zhimg.com/80/v2-5b3f6e02e0d3a0cdb685a4d2fd2718cb_720w.jpg" alt="img"></p>
<p>博文分享的插件jiathis，值设置为true。在配置文件中有很多的个性化设置，可以自尝试更多的修改。</p>
<p>进阶个性化：</p>
<ul>
<li>添加网易云音乐</li>
</ul>
<p>打开网页版的网易云音乐，选择喜欢的音乐，点击生成外链播放器</p>
<p><img src="https://pic2.zhimg.com/80/v2-fcb7d44ccdca3760c98db0d13817f2b5_720w.jpg" alt="img"></p>
<p>复制外链的代码</p>
<p><img src="https://pic4.zhimg.com/80/v2-16eec195312cde7b1d257fac6f3c8d0b_720w.jpg" alt="img"></p>
<p>比如在侧栏插入这首歌的音乐播放器，修改 blog\themes\next\layout_macro的sidebar.swig文件，添加刚刚复制的外链代码</p>
<p><img src="https://pic4.zhimg.com/80/v2-03db51002497b27e4d5888e0efd577c7_720w.jpg" alt="img"></p>
<p>重新生成、部署网页，效果如下</p>
<p><img src="https://pic2.zhimg.com/80/v2-3d587bf919df92db38e2608f034e50f1_720w.jpg" alt="img"></p>
<ul>
<li>设置背景</li>
</ul>
<p>把你挑选的背景图片命名为：background.jpg，放在blog\themes\next\source\images里，在blog\themes\next\source\css_custom文件的custom.styl首部添加：</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-tag">body</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>:<span class="built_in">url</span>(<span class="string">/images/background.jpg</span>);</span><br><span class="line">  <span class="attribute">background-attachment</span>: fixed;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>background-attachment: fixed;是固定背景图片。</p>
<p>这是设置一张静态图片作为背景，其实Next主题自带有动态的背景效果，修改主题配置文件中的canvas_nest: false为canvas_nest: true即可。</p>
<ul>
<li>增加侧栏菜单条目</li>
</ul>
<p>默认的侧栏菜单条目有：首页、归档、标签、关于、搜索等。如果你想要增加其他的菜单条目，修改主题配置文件_config.yml里的Menu Settings中的menu和menu_icons两个地方</p>
<p><img src="https://pic3.zhimg.com/80/v2-666a22fedbba95d979eeb26e52fc29e2_720w.jpg" alt="img"></p>
<p>其中menu里是配置菜单项对应的页面位置（如：/love），menu_icons对应菜单项的图标，这里的图标是来自于<a href="https://link.zhihu.com/?target=http://fontawesome.io/">Font Awesome</a> ，所以你需要在Font Awesome网站上找到你需要的icon，然后把该icon的名字写在menu_icons对应菜单名后面，<em><strong>注意冒号有一个英文输入状态的空格</strong></em>。设置好后，在命令行里输入：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">hexo new page <span class="string">&quot;你所要增加的菜单项名称（要和你在menu中的填写要匹配）&quot;</span></span><br></pre></td></tr></table></figure>

<p>新建的页面在博客根目录下的source文件里，这时你就可以对新建的页面自定义设计。</p>
<p>还有更多的进阶个性化设置，如SEO、评论系统、个人头像、博客分享、订阅功能、High功能、404网页设置等，可以参看：</p>
<p><a href="https://link.zhihu.com/?target=http://theme-next.iissnan.com/theme-settings.html">主题配置 - NexT 使用文档</a></p>
<p><a href="https://link.zhihu.com/?target=http://theme-next.iissnan.com/third-party-services.html">第三方服务集成 - NexT 使用文档</a></p>
<p><a href="https://link.zhihu.com/?target=http://theme-next.iissnan.com/tag-plugins.html">内置标签 - NexT 使用文</a></p>
<p><a href="https://link.zhihu.com/?target=http://theme-next.iissnan.com/tag-plugins.html">档</a><a href="https://link.zhihu.com/?target=http://theme-next.iissnan.com/advanced-settings.html">进阶设定 - NexT 使用文档</a></p>
<p><strong>其他</strong></p>
<p>终于写到这里了，也算是基本圆满完成了我的写作初衷，总结自己的一些经验，分享一些有趣的东西，不过脖子也是僵硬的受不了。我知道很多人想要建立自己的个人网站却一直没有付诸行动，希望这篇文章能给你一点点灵感与想法，just do it。本文是windows平台的搭建过程，其他平台可以参看相关资料，也有很多其他优秀的博客框架值得学习。如果有任何建议或想法、或疑问欢迎在评论区交流， 做好的网站不妨在评论区贴出网址，让大家一起学习。</p>
<p><strong>附录</strong></p>
<p><strong>以下是评论区贴出网址的博客展示：</strong></p>
<p><a href="https://link.zhihu.com/?target=http://jmyblog.top/">…Miss.j BlogDiary…</a></p>
<p><a href="https://link.zhihu.com/?target=http://ibb.chaodamiao.com/">RILWEIC</a></p>
<p><a href="https://link.zhihu.com/?target=http://blog.sunxinfei.com/">Xin’s Notes</a></p>
<p><a href="https://link.zhihu.com/?target=https://guguant.github.io/">飞鸟与鱼</a></p>
<p><a href="https://link.zhihu.com/?target=http://www.fuck-goods.tk/">无名博客</a></p>
<p><a href="https://link.zhihu.com/?target=http://helloqa.com/">iTesting软件测试知识分享</a></p>
<p><a href="https://link.zhihu.com/?target=http://bolg.upsky.top/">赵小源的个人博客</a></p>
<p><a href="https://link.zhihu.com/?target=http://www.huajiayi.top/">华嘉熠’s Blog</a></p>
<p><a href="https://link.zhihu.com/?target=http://asmire.site/">Cocoon</a></p>
<p><a href="https://link.zhihu.com/?target=https://luoshaoxiong.github.io/">罗少雄’s Blog</a></p>
<p><a href="https://link.zhihu.com/?target=https://lruihao.github.io/">李四啊_</a></p>
<p><strong>其他优秀个人博客展示：</strong></p>
<p><a href="https://link.zhihu.com/?target=https://www.dandyweng.com/">翁天信 · Dandy Weng</a> <a href="https://link.zhihu.com/?target=http://chaoxuprime.com/">chaoxuprim</a> <a href="https://link.zhihu.com/?target=http://kenjiendo.com/">KENJI ENDO</a> <a href="https://link.zhihu.com/?target=http://shenzekun.cn/">Moorez</a> <a href="https://link.zhihu.com/?target=https://codesky.me/">CodeSky 代码之空</a> <a href="https://link.zhihu.com/?target=http://www.helloshawn.cn/">大江东去</a> <a href="https://link.zhihu.com/?target=http://iconmoon.com/">UI Design Portfolio of JJ Ying</a> <a href="https://link.zhihu.com/?target=http://www.jeyzhang.com/">JeyZhang</a> <a href="https://link.zhihu.com/?target=http://blog.lightina.cn/">jacklightChen | 得到的都是侥幸</a> <a href="https://link.zhihu.com/?target=https://qingpei.me/">edwardtoday</a> <a href="https://link.zhihu.com/?target=http://rafaltomal.com/">Rafal Tomal - Web Designer and Genesis Developer</a> <a href="https://link.zhihu.com/?target=http://strml.net/">Projects and Work</a> <a href="https://link.zhihu.com/?target=http://miaoxiaoer.com/">绘画爱好者</a> <a href="https://link.zhihu.com/?target=http://ursocute.github.io/">万世奇的博客</a> <a href="https://link.zhihu.com/?target=https://rauchg.com/">Guillermo Rauch</a></p>
<p><strong>相关文章：</strong></p>
<blockquote>
<p><a href="https://zhuanlan.zhihu.com/p/58654392">Hexo 从 GitHub 到阿里云</a></p>
</blockquote>
]]></content>
      <categories>
        <category>前端</category>
      </categories>
  </entry>
  <entry>
    <title>HexoNext进阶优化</title>
    <url>/2021/01/15/HexoNext_%E8%BF%9B%E9%98%B6/</url>
    <content><![CDATA[<h1 id="hexo的next主题个性化教程：打造炫酷网站"><a href="#hexo的next主题个性化教程：打造炫酷网站" class="headerlink" title="hexo的next主题个性化教程：打造炫酷网站"></a>hexo的next主题个性化教程：打造炫酷网站</h1><p><a href="https://blog.csdn.net/qq_33699981/article/details/72716951">https://blog.csdn.net/qq_33699981/article/details/72716951</a></p>
<h2 id="NexT官方"><a href="#NexT官方" class="headerlink" title="NexT官方"></a>NexT官方</h2><p><a href="http://theme-next.iissnan.com/getting-started.html#avatar-setting">http://theme-next.iissnan.com/getting-started.html#avatar-setting</a></p>
<h1 id="hexo-next主题高级配置"><a href="#hexo-next主题高级配置" class="headerlink" title="hexo + next主题高级配置"></a>hexo + next主题高级配置</h1><p><a href="https://blog.csdn.net/destinytaoer/article/details/78400023">https://blog.csdn.net/destinytaoer/article/details/78400023</a></p>
<h1 id="hexo-next主题如何加头像"><a href="#hexo-next主题如何加头像" class="headerlink" title="hexo next主题如何加头像"></a>hexo next主题如何加头像</h1><p>Hexo 是一个快速、简洁且高效的博客框架。Hexo 使用 Markdown或其他渲染引擎，解析文章，在几秒内，即可利用靓丽的主生成静态网页。其中主题也是各种各样。这是我博客的头像</p>
<p><img src="https://exp-picture.cdn.bcebos.com/9bc92713e8e5eceee638f19ccc704618deda7adb.jpg?x-bce-process=image/resize,m_lfit,w_500,limit_1/format,f_jpg/quality,q_80" alt="hexo next主题如何加头像"></p>
<h2 id="工具-原料"><a href="#工具-原料" class="headerlink" title="工具/原料"></a>工具/原料</h2><ul>
<li>头像图片（像素为200×200）</li>
<li>编辑工具（如：Notepad++）</li>
</ul>
<h2 id="实施修改"><a href="#实施修改" class="headerlink" title="实施修改"></a>实施修改</h2><ol>
<li><p>首先找到你安装hexo Next主题的文件夹，我的是放在F盘的，具体的地址为F:\项目文件\themes\next，在next文件夹在找到主题配置文件_config.yml，然后打开</p>
<p><img src="https://exp-picture.cdn.bcebos.com/de9bfa3b3b8602211cd3dce5d8bbf82065fb72db.jpg?x-bce-process=image/resize,m_lfit,w_500,limit_1/format,f_jpg/quality,q_80" alt="hexo next主题如何加头像"></p>
</li>
<li><p>把你的要加的头像修整好，最好是像素200×200的，复制粘贴到\themes\next\source\images文件下，图片名称为：avatar.gif</p>
<p><img src="https://exp-picture.cdn.bcebos.com/52fae62064fb960b68a54ad28fa355e982ae6cdb.jpg?x-bce-process=image/resize,m_lfit,w_500,limit_1/format,f_jpg/quality,q_80" alt="hexo next主题如何加头像"></p>
</li>
<li><p>在主题配置文件_config.yml里面找到avatar（可以用快速查找，快速找到），在里面添加 url: /images/avatar.gif（注意：url：要加一个空格）</p>
<p><img src="https://exp-picture.cdn.bcebos.com/54a89daee8d7592a836bafcb9f31dfb6336c67db.jpg?x-bce-process=image/resize,m_lfit,w_500,limit_1/format,f_jpg/quality,q_80" alt="hexo next主题如何加头像"></p>
</li>
<li><p>4</p>
<p>添加好之后保存一下，然后重新运行hexo，就好了。</p>
</li>
</ol>
<h3 id="8、搜索菜单"><a href="#8、搜索菜单" class="headerlink" title="8、搜索菜单"></a>8、搜索菜单</h3><p>安装插件：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">npm install hexo-generator-searchdb --save</span><br></pre></td></tr></table></figure>

<p>在站点配置文件最后新增：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">search:</span><br><span class="line">  path: search.xml</span><br><span class="line">  field: post</span><br><span class="line">  format: html</span><br><span class="line">  limit: 10000</span><br></pre></td></tr></table></figure>

<p>修改主题文件，搜索local_search，将enable改为true</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">local_search:</span><br><span class="line">  enable: true</span><br></pre></td></tr></table></figure>

<h3 id="设置文章缩略显示"><a href="#设置文章缩略显示" class="headerlink" title="设置文章缩略显示"></a>设置文章缩略显示</h3><p>编辑themes/next/_config.yml，搜索auto_excerpt，设置为true：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># Automatically Excerpt (Not recommend).</span><br><span class="line"># 设置文章不显示全部 点进去再显示全部</span><br><span class="line"># Use &lt;!-- more --&gt; in the post to control excerpt accurately.</span><br><span class="line">auto_excerpt:</span><br><span class="line">enable: true</span><br><span class="line">length: 150</span><br></pre></td></tr></table></figure>

<h2 id="Hexo-Next-Gemini主题修改-页面宽度修改"><a href="#Hexo-Next-Gemini主题修改-页面宽度修改" class="headerlink" title="Hexo Next - Gemini主题修改-页面宽度修改"></a>Hexo Next - Gemini主题修改-页面宽度修改</h2><h3 id="页面宽度修改"><a href="#页面宽度修改" class="headerlink" title="页面宽度修改"></a>页面宽度修改</h3><p>chrome浏览器F12查看到页面的内容宽度占比为75%，找到themes中的next文件夹，进入/source/css/_variables/目录，打开Gemini.styl文件。可以看到以下内容：<br><a href="http://www.tanrd.com/2018/10/19/geminimodify/gemini_styl.jpg"><img src="http://www.tanrd.com/2018/10/19/geminimodify/gemini_styl.jpg" alt="将75%修改成90%即可增大可视区域。"></a></p>
<p><a href="http://www.tanrd.com/2018/10/19/geminimodify/gemini_styl.jpg">将75%修改成90%即可增大可视区域。</a></p>
<p>也可以设置$body-bg-color，改变页面背景色。</p>
<h1 id="Hexo-Next-添加版权协议并修改出现位置"><a href="#Hexo-Next-添加版权协议并修改出现位置" class="headerlink" title="Hexo Next 添加版权协议并修改出现位置"></a>Hexo Next 添加版权协议并修改出现位置</h1><p>首先打开next的<code>_config.yaml</code>，设置enable为true</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Declare license on posts</span></span><br><span class="line"><span class="attr">post_copyright:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">license:</span> <span class="string">CC</span> <span class="string">BY-NC-SA</span> <span class="number">3.0</span></span><br><span class="line">  <span class="attr">license_url:</span> <span class="string">https://creativecommons.org/licenses/by-nc-sa/3.0/</span></span><br></pre></td></tr></table></figure>

<p>然后到hexo的主<code>_config.yaml</code>，搜索<code>url:</code>，把内容改成自己的博客域名比如：</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">url:</span> <span class="string">https://exkulo.github.io</span></span><br></pre></td></tr></table></figure>

<p>然后就发现能显示出来了。</p>
]]></content>
      <categories>
        <category>前端</category>
      </categories>
  </entry>
  <entry>
    <title>HexoNext的问题汇总</title>
    <url>/2021/01/15/HexoNext_%E9%97%AE%E9%A2%98%E6%B1%87%E6%80%BB/</url>
    <content><![CDATA[<h3 id="一：hexo使用theme出现【extends-‘-layout-swig‘-import-‘-macro-post-swig‘-as-post-template】问题"><a href="#一：hexo使用theme出现【extends-‘-layout-swig‘-import-‘-macro-post-swig‘-as-post-template】问题" class="headerlink" title="一：hexo使用theme出现【extends ‘_layout.swig‘  import ‘_macro/post.swig‘ as post_template】问题"></a>一：hexo使用theme出现【extends ‘_layout.swig‘  import ‘_macro/post.swig‘ as post_template】问题</h3><p>答：原因是<a href="https://so.csdn.net/so/search?q=hexo">hexo</a>在5.0之后把swig给删除了需要自己手动安装</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">npm i hexo-renderer-swig</span><br></pre></td></tr></table></figure>

<h3 id="二：hexo中next主题下创建标签问题【-Cannot-GET-tags-20-】"><a href="#二：hexo中next主题下创建标签问题【-Cannot-GET-tags-20-】" class="headerlink" title="二：hexo中next主题下创建标签问题【 Cannot GET /tags/%20/】"></a>二：hexo中next主题下创建标签问题【 Cannot GET /tags/%20/】</h3><p>按照教程新建了标签页，也修改了index文档。</p>
<p>但是点击tags界面之后只有一行字【Cannot GET /tags/%20/】<br>经过一通搜索，知道【%20】 是空格的意思，把配置文件里 ||之前所有的空格删掉即可。</p>
<p><img src="https://img-blog.csdnimg.cn/20200709152547835.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQxMTcwOTgz,size_16,color_FFFFFF,t_70" alt="img"></p>
<p>这个bug奇怪的点在于这个空格是next主题文件配置里面自带的，之前配置的时候好像也遇到过</p>
<h3 id="三：Hexo-Next-5-1-4目前已知bug及其处理办法"><a href="#三：Hexo-Next-5-1-4目前已知bug及其处理办法" class="headerlink" title="三：Hexo-Next 5.1.4目前已知bug及其处理办法"></a>三：Hexo-Next 5.1.4目前已知bug及其处理办法</h3><p><a href="https://blog.csdn.net/shuiyunxc/article/details/104150894">https://blog.csdn.net/shuiyunxc/article/details/104150894</a></p>
<h3 id="1-边栏头像下面日志链接错误"><a href="#1-边栏头像下面日志链接错误" class="headerlink" title="1.边栏头像下面日志链接错误"></a>1.边栏头像下面日志链接错误</h3><p>在\themes\next\layout_macro\sidebar.swig中，<br>原代码49行：</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;&#123;&#123; url_for(theme.menu.archives).split(&#x27;||&#x27;)[0] | trim &#125;&#125;&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure>


<p>修改为：</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;&#123;&#123; url_for(config.archive_dir) | trim &#125;&#125;&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="2-底部页面左右标签显示错误“”"><a href="#2-底部页面左右标签显示错误“”" class="headerlink" title="2. 底部页面左右标签显示错误“”"></a>2. 底部页面左右标签显示错误“”</h3><p><img src="https://img-blog.csdnimg.cn/20200202231913533.jpg" alt="在这里插入图片描述"></p>
<p>在<code>\themes\next\layout\_partials\pagination.swig</code>中，</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line">&#123;% if page.prev or page.next %&#125;</span><br><span class="line">  <span class="tag">&lt;<span class="name">nav</span> <span class="attr">class</span>=<span class="string">&quot;pagination&quot;</span>&gt;</span></span><br><span class="line">    &#123;&#123;</span><br><span class="line">      paginator(&#123;</span><br><span class="line">        prev_text: &#x27;<span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;fa fa-angle-left&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span>&#x27;,</span><br><span class="line">        next_text: &#x27;<span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;fa fa-angle-right&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span>&#x27;,</span><br><span class="line">        mid_size: 1</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;&#125;</span><br><span class="line">  <span class="tag">&lt;/<span class="name">nav</span>&gt;</span></span><br><span class="line">&#123;% endif %&#125;</span><br></pre></td></tr></table></figure>

<p>修改为：</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line">&#123;%- if page.prev or page.next %&#125;</span><br><span class="line">  <span class="tag">&lt;<span class="name">nav</span> <span class="attr">class</span>=<span class="string">&quot;pagination&quot;</span>&gt;</span></span><br><span class="line">    &#123;&#123;</span><br><span class="line">      paginator(&#123;</span><br><span class="line">        prev_text: &#x27;<span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;fa fa-hand-o-left&quot;</span> <span class="attr">aria-label</span>=<span class="string">&quot;&#x27; + __(&#x27;accessibility.prev_page&#x27;) + &#x27;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span>&#x27;,</span><br><span class="line">        next_text: &#x27;<span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;fa fa-hand-o-right&quot;</span> <span class="attr">aria-label</span>=<span class="string">&quot;&#x27; + __(&#x27;accessibility.next_page&#x27;) + &#x27;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span>&#x27;,</span><br><span class="line">        mid_size : 1,</span><br><span class="line">        escape   : false</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;&#125;</span><br><span class="line">  <span class="tag">&lt;/<span class="name">nav</span>&gt;</span></span><br><span class="line">&#123;%- endif %&#125;</span><br></pre></td></tr></table></figure>

<p>其中：<code>fa-angle-right</code>为图标样式，可以自己改为自己喜欢的，去<a href="http://www.fontawesome.com.cn/faicons/%E6%89%BE">http://www.fontawesome.com.cn/faicons/找</a></p>
<h3 id="3-阅读次数不显示"><a href="#3-阅读次数不显示" class="headerlink" title="3.阅读次数不显示"></a>3.阅读次数不显示</h3><h4 id="修改-lean-analytics-swig"><a href="#修改-lean-analytics-swig" class="headerlink" title="修改 lean-analytics.swig"></a>修改 lean-analytics.swig</h4><p>在<code>\themes\next\layout\_third-party\analytics\lean-analytics.swig</code>中<br>的lean-analytics.swig代码有错误</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line">&#123;% if theme.leancloud_visitors.enable %&#125;</span><br><span class="line"></span><br><span class="line">  &#123;# custom analytics part create by xiamo #&#125;</span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://cdn1.lncld.net/static/js/av-core-mini-0.6.4.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="handlebars"><span class="xml">AV.initialize(&quot;</span><span class="template-variable">&#123;&#123;<span class="name">theme.leancloud_visitors.app_id</span>&#125;&#125;</span><span class="xml">&quot;, &quot;</span><span class="template-variable">&#123;&#123;<span class="name">theme.leancloud_visitors.app_key</span>&#125;&#125;</span><span class="xml">&quot;);</span></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript">    <span class="function"><span class="keyword">function</span> <span class="title">showTime</span>(<span class="params">Counter</span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">      <span class="keyword">var</span> query = <span class="keyword">new</span> AV.Query(Counter);</span></span><br><span class="line"><span class="javascript">      <span class="keyword">var</span> entries = [];</span></span><br><span class="line"><span class="javascript">      <span class="keyword">var</span> $visitors = $(<span class="string">&quot;.leancloud_visitors&quot;</span>);</span></span><br><span class="line"><span class="javascript"></span></span><br><span class="line"><span class="javascript">      $visitors.each(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">        entries.push( $(<span class="built_in">this</span>).attr(<span class="string">&quot;id&quot;</span>).trim() );</span></span><br><span class="line"><span class="javascript">      &#125;);</span></span><br><span class="line"><span class="javascript"></span></span><br><span class="line"><span class="javascript">      query.containedIn(<span class="string">&#x27;url&#x27;</span>, entries);</span></span><br><span class="line"><span class="javascript">      query.find()</span></span><br><span class="line"><span class="javascript">        .done(<span class="function"><span class="keyword">function</span> (<span class="params">results</span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">          <span class="keyword">var</span> COUNT_CONTAINER_REF = <span class="string">&#x27;.leancloud-visitors-count&#x27;</span>;</span></span><br><span class="line"><span class="javascript"></span></span><br><span class="line"><span class="javascript">          <span class="keyword">if</span> (results.length === <span class="number">0</span>) &#123;</span></span><br><span class="line"><span class="javascript">            $visitors.find(COUNT_CONTAINER_REF).text(<span class="number">0</span>);</span></span><br><span class="line"><span class="javascript">            <span class="keyword">return</span>;</span></span><br><span class="line"><span class="javascript">          &#125;</span></span><br><span class="line"><span class="javascript"></span></span><br><span class="line"><span class="javascript">          <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; results.length; i++) &#123;</span></span><br><span class="line"><span class="javascript">            <span class="keyword">var</span> item = results[i];</span></span><br><span class="line"><span class="javascript">            <span class="keyword">var</span> url = item.get(<span class="string">&#x27;url&#x27;</span>);</span></span><br><span class="line"><span class="javascript">            <span class="keyword">var</span> time = item.get(<span class="string">&#x27;time&#x27;</span>);</span></span><br><span class="line"><span class="javascript">            <span class="keyword">var</span> element = <span class="built_in">document</span>.getElementById(url);</span></span><br><span class="line"><span class="javascript"></span></span><br><span class="line"><span class="javascript">            $(element).find(COUNT_CONTAINER_REF).text(time);</span></span><br><span class="line"><span class="javascript">          &#125;</span></span><br><span class="line"><span class="javascript">          <span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; entries.length; i++) &#123;</span></span><br><span class="line"><span class="javascript">            <span class="keyword">var</span> url = entries[i];</span></span><br><span class="line"><span class="javascript">            <span class="keyword">var</span> element = <span class="built_in">document</span>.getElementById(url);</span></span><br><span class="line"><span class="javascript">            <span class="keyword">var</span> countSpan = $(element).find(COUNT_CONTAINER_REF);</span></span><br><span class="line"><span class="javascript">            <span class="keyword">if</span>( countSpan.text() == <span class="string">&#x27;&#x27;</span>) &#123;</span></span><br><span class="line"><span class="javascript">              countSpan.text(<span class="number">0</span>);</span></span><br><span class="line"><span class="javascript">            &#125;</span></span><br><span class="line"><span class="javascript">          &#125;</span></span><br><span class="line"><span class="javascript">        &#125;)</span></span><br><span class="line"><span class="javascript">        .fail(<span class="function"><span class="keyword">function</span> (<span class="params">object, error</span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">          <span class="built_in">console</span>.log(<span class="string">&quot;Error: &quot;</span> + error.code + <span class="string">&quot; &quot;</span> + error.message);</span></span><br><span class="line"><span class="javascript">        &#125;);</span></span><br><span class="line"><span class="javascript">    &#125;</span></span><br><span class="line"><span class="javascript"></span></span><br><span class="line"><span class="javascript">    <span class="function"><span class="keyword">function</span> <span class="title">addCount</span>(<span class="params">Counter</span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">      <span class="keyword">var</span> $visitors = $(<span class="string">&quot;.leancloud_visitors&quot;</span>);</span></span><br><span class="line"><span class="javascript">      <span class="keyword">var</span> url = $visitors.attr(<span class="string">&#x27;id&#x27;</span>).trim();</span></span><br><span class="line"><span class="javascript">      <span class="keyword">var</span> title = $visitors.attr(<span class="string">&#x27;data-flag-title&#x27;</span>).trim();</span></span><br><span class="line"><span class="javascript">      <span class="keyword">var</span> query = <span class="keyword">new</span> AV.Query(Counter);</span></span><br><span class="line"><span class="javascript"></span></span><br><span class="line"><span class="javascript">      query.equalTo(<span class="string">&quot;url&quot;</span>, url);</span></span><br><span class="line"><span class="javascript">      query.find(&#123;</span></span><br><span class="line"><span class="javascript">        <span class="attr">success</span>: <span class="function"><span class="keyword">function</span>(<span class="params">results</span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">          <span class="keyword">if</span> (results.length &gt; <span class="number">0</span>) &#123;</span></span><br><span class="line"><span class="javascript">            <span class="keyword">var</span> counter = results[<span class="number">0</span>];</span></span><br><span class="line"><span class="javascript">            counter.fetchWhenSave(<span class="literal">true</span>);</span></span><br><span class="line"><span class="javascript">            counter.increment(<span class="string">&quot;time&quot;</span>);</span></span><br><span class="line"><span class="javascript">            counter.save(<span class="literal">null</span>, &#123;</span></span><br><span class="line"><span class="javascript">              <span class="attr">success</span>: <span class="function"><span class="keyword">function</span>(<span class="params">counter</span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">                <span class="keyword">var</span> $element = $(<span class="built_in">document</span>.getElementById(url));</span></span><br><span class="line"><span class="javascript">                $element.find(<span class="string">&#x27;.leancloud-visitors-count&#x27;</span>).text(counter.get(<span class="string">&#x27;time&#x27;</span>));</span></span><br><span class="line"><span class="javascript">              &#125;,</span></span><br><span class="line"><span class="javascript">              <span class="attr">error</span>: <span class="function"><span class="keyword">function</span>(<span class="params">counter, error</span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">                <span class="built_in">console</span>.log(<span class="string">&#x27;Failed to save Visitor num, with error message: &#x27;</span> + error.message);</span></span><br><span class="line"><span class="javascript">              &#125;</span></span><br><span class="line"><span class="javascript">            &#125;);</span></span><br><span class="line"><span class="javascript">          &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="javascript">            <span class="keyword">var</span> newcounter = <span class="keyword">new</span> Counter();</span></span><br><span class="line"><span class="javascript">            <span class="comment">/* Set ACL */</span></span></span><br><span class="line"><span class="javascript">            <span class="keyword">var</span> acl = <span class="keyword">new</span> AV.ACL();</span></span><br><span class="line"><span class="javascript">            acl.setPublicReadAccess(<span class="literal">true</span>);</span></span><br><span class="line"><span class="javascript">            acl.setPublicWriteAccess(<span class="literal">true</span>);</span></span><br><span class="line"><span class="javascript">            newcounter.setACL(acl);</span></span><br><span class="line"><span class="javascript">            <span class="comment">/* End Set ACL */</span></span></span><br><span class="line"><span class="javascript">            newcounter.set(<span class="string">&quot;title&quot;</span>, title);</span></span><br><span class="line"><span class="javascript">            newcounter.set(<span class="string">&quot;url&quot;</span>, url);</span></span><br><span class="line"><span class="javascript">            newcounter.set(<span class="string">&quot;time&quot;</span>, <span class="number">1</span>);</span></span><br><span class="line"><span class="javascript">            newcounter.save(<span class="literal">null</span>, &#123;</span></span><br><span class="line"><span class="javascript">              <span class="attr">success</span>: <span class="function"><span class="keyword">function</span>(<span class="params">newcounter</span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">                <span class="keyword">var</span> $element = $(<span class="built_in">document</span>.getElementById(url));</span></span><br><span class="line"><span class="javascript">                $element.find(<span class="string">&#x27;.leancloud-visitors-count&#x27;</span>).text(newcounter.get(<span class="string">&#x27;time&#x27;</span>));</span></span><br><span class="line"><span class="javascript">              &#125;,</span></span><br><span class="line"><span class="javascript">              <span class="attr">error</span>: <span class="function"><span class="keyword">function</span>(<span class="params">newcounter, error</span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">                <span class="built_in">console</span>.log(<span class="string">&#x27;Failed to create&#x27;</span>);</span></span><br><span class="line"><span class="javascript">              &#125;</span></span><br><span class="line"><span class="javascript">            &#125;);</span></span><br><span class="line"><span class="javascript">          &#125;</span></span><br><span class="line"><span class="javascript">        &#125;,</span></span><br><span class="line"><span class="javascript">        <span class="attr">error</span>: <span class="function"><span class="keyword">function</span>(<span class="params">error</span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">          <span class="built_in">console</span>.log(<span class="string">&#x27;Error:&#x27;</span> + error.code + <span class="string">&quot; &quot;</span> + error.message);</span></span><br><span class="line"><span class="javascript">        &#125;</span></span><br><span class="line"><span class="javascript">      &#125;);</span></span><br><span class="line"><span class="javascript">    &#125;</span></span><br><span class="line"><span class="javascript"></span></span><br><span class="line"><span class="javascript">    $(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">      <span class="keyword">var</span> Counter = AV.Object.extend(<span class="string">&quot;Counter&quot;</span>);</span></span><br><span class="line"><span class="javascript">      <span class="keyword">if</span> ($(<span class="string">&#x27;.leancloud_visitors&#x27;</span>).length == <span class="number">1</span>) &#123;</span></span><br><span class="line"><span class="javascript">        addCount(Counter);</span></span><br><span class="line"><span class="javascript">      &#125; <span class="keyword">else</span> <span class="keyword">if</span> ($(<span class="string">&#x27;.post-title-link&#x27;</span>).length &gt; <span class="number">1</span>) &#123;</span></span><br><span class="line"><span class="javascript">        showTime(Counter);</span></span><br><span class="line"><span class="javascript">      &#125;</span></span><br><span class="line"><span class="javascript">    &#125;);</span></span><br><span class="line"><span class="javascript">  </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line">&#123;% endif %&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>修改为：</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line">&#123;% if theme.leancloud_visitors.enable and !theme.valine.visitor %&#125;</span><br><span class="line">  &#123;# custom analytics part create by xiamo; edited by LEAFERx #&#125;</span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript">    &#123;% <span class="keyword">if</span> page.layout === <span class="string">&#x27;post&#x27;</span> %&#125;</span></span><br><span class="line"><span class="javascript">    <span class="function"><span class="keyword">function</span> <span class="title">addCount</span>(<span class="params">Counter</span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">      <span class="keyword">var</span> $visitors = $(<span class="string">&#x27;.leancloud_visitors&#x27;</span>);</span></span><br><span class="line"><span class="javascript">      <span class="keyword">var</span> url = $visitors.attr(<span class="string">&#x27;id&#x27;</span>).trim();</span></span><br><span class="line"><span class="javascript">      <span class="keyword">var</span> title = $visitors.attr(<span class="string">&#x27;data-flag-title&#x27;</span>).trim();</span></span><br><span class="line"><span class="javascript"></span></span><br><span class="line"><span class="javascript">      Counter(<span class="string">&#x27;get&#x27;</span>, <span class="string">&#x27;/classes/Counter&#x27;</span>, &#123; <span class="attr">where</span>: <span class="built_in">JSON</span>.stringify(&#123; url &#125;) &#125;)</span></span><br><span class="line"><span class="javascript">        .done(<span class="function"><span class="keyword">function</span>(<span class="params">&#123; results &#125;</span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">          <span class="keyword">if</span> (results.length &gt; <span class="number">0</span>) &#123;</span></span><br><span class="line"><span class="javascript">            <span class="keyword">var</span> counter = results[<span class="number">0</span>];</span></span><br><span class="line"><span class="javascript">            &#123;% <span class="keyword">if</span> theme.leancloud_visitors.betterPerformance %&#125;</span></span><br><span class="line"><span class="javascript">              <span class="keyword">var</span> $element = $(<span class="built_in">document</span>.getElementById(url));</span></span><br><span class="line"><span class="javascript">              $element.find(<span class="string">&#x27;.leancloud-visitors-count&#x27;</span>).text(counter.time + <span class="number">1</span>);</span></span><br><span class="line"><span class="javascript">            &#123;% endif %&#125;</span></span><br><span class="line"><span class="javascript">            <span class="function"><span class="title">Counter</span>(<span class="params"><span class="string">&#x27;put&#x27;</span>, <span class="string">&#x27;/classes/Counter/&#x27;</span> + counter.objectId, <span class="built_in">JSON</span>.stringify(&#123; time: &#123; <span class="string">&#x27;__op&#x27;</span>: <span class="string">&#x27;Increment&#x27;</span>, <span class="string">&#x27;amount&#x27;</span>: <span class="number">1</span> &#125; &#125;)</span>)</span></span></span><br><span class="line"><span class="javascript">            &#123;% <span class="keyword">if</span> not theme.leancloud_visitors.betterPerformance %&#125;</span></span><br><span class="line"><span class="javascript">              .done(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">                <span class="keyword">var</span> $element = $(<span class="built_in">document</span>.getElementById(url));</span></span><br><span class="line"><span class="javascript">                $element.find(<span class="string">&#x27;.leancloud-visitors-count&#x27;</span>).text(counter.time + <span class="number">1</span>);</span></span><br><span class="line"><span class="javascript">              &#125;)</span></span><br><span class="line"><span class="javascript">            &#123;% endif %&#125;</span></span><br><span class="line"><span class="javascript">              .fail(<span class="function"><span class="keyword">function</span> (<span class="params">&#123; responseJSON &#125;</span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">                <span class="built_in">console</span>.log(<span class="string">&#x27;Failed to save Visitor num, with error message: &#x27;</span> + responseJSON.error);</span></span><br><span class="line"><span class="javascript">              &#125;)</span></span><br><span class="line"><span class="javascript">          &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="javascript">            &#123;% <span class="keyword">if</span> theme.leancloud_visitors.security %&#125;</span></span><br><span class="line"><span class="javascript">              <span class="keyword">var</span> $element = $(<span class="built_in">document</span>.getElementById(url));</span></span><br><span class="line"><span class="javascript">              $element.find(<span class="string">&#x27;.leancloud-visitors-count&#x27;</span>).text(<span class="string">&#x27;Counter not initialized! More info at console err msg.&#x27;</span>);</span></span><br><span class="line"><span class="javascript">              <span class="built_in">console</span>.error(<span class="string">&#x27;ATTENTION! LeanCloud counter has security bug, see how to solve it here: https://github.com/theme-next/hexo-leancloud-counter-security. \n However, you can still use LeanCloud without security, by setting `security` option to `false`.&#x27;</span>);</span></span><br><span class="line"><span class="javascript">            &#123;% <span class="keyword">else</span> %&#125;</span></span><br><span class="line"><span class="javascript">              Counter(<span class="string">&#x27;post&#x27;</span>, <span class="string">&#x27;/classes/Counter&#x27;</span>, <span class="built_in">JSON</span>.stringify(&#123; <span class="attr">title</span>: title, <span class="attr">url</span>: url, <span class="attr">time</span>: <span class="number">1</span> &#125;))</span></span><br><span class="line"><span class="javascript">                .done(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">                  <span class="keyword">var</span> $element = $(<span class="built_in">document</span>.getElementById(url));</span></span><br><span class="line"><span class="javascript">                  $element.find(<span class="string">&#x27;.leancloud-visitors-count&#x27;</span>).text(<span class="number">1</span>);</span></span><br><span class="line"><span class="javascript">                &#125;)</span></span><br><span class="line"><span class="javascript">                .fail(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">                  <span class="built_in">console</span>.log(<span class="string">&#x27;Failed to create&#x27;</span>);</span></span><br><span class="line"><span class="javascript">                &#125;);</span></span><br><span class="line"><span class="javascript">            &#123;% endif %&#125;</span></span><br><span class="line"><span class="javascript">          &#125;</span></span><br><span class="line"><span class="javascript">        &#125;)</span></span><br><span class="line"><span class="javascript">        .fail(<span class="function"><span class="keyword">function</span> (<span class="params">&#123; responseJSON &#125;</span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">          <span class="built_in">console</span>.log(<span class="string">&#x27;LeanCloud Counter Error: &#x27;</span> + responseJSON.code + <span class="string">&#x27; &#x27;</span> + responseJSON.error);</span></span><br><span class="line"><span class="javascript">        &#125;);</span></span><br><span class="line"><span class="javascript">    &#125;</span></span><br><span class="line"><span class="javascript">    &#123;% <span class="keyword">else</span> %&#125;</span></span><br><span class="line"><span class="javascript">    <span class="function"><span class="keyword">function</span> <span class="title">showTime</span>(<span class="params">Counter</span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">      <span class="keyword">var</span> entries = [];</span></span><br><span class="line"><span class="javascript">      <span class="keyword">var</span> $visitors = $(<span class="string">&#x27;.leancloud_visitors&#x27;</span>);</span></span><br><span class="line"><span class="javascript"></span></span><br><span class="line"><span class="javascript">      $visitors.each(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">        entries.push( $(<span class="built_in">this</span>).attr(<span class="string">&#x27;id&#x27;</span>).trim() );</span></span><br><span class="line"><span class="javascript">      &#125;);</span></span><br><span class="line"><span class="javascript"></span></span><br><span class="line"><span class="javascript">      Counter(<span class="string">&#x27;get&#x27;</span>, <span class="string">&#x27;/classes/Counter&#x27;</span>, &#123; <span class="attr">where</span>: <span class="built_in">JSON</span>.stringify(&#123; <span class="attr">url</span>: &#123; <span class="string">&#x27;$in&#x27;</span>: entries &#125; &#125;) &#125;)</span></span><br><span class="line"><span class="javascript">        .done(<span class="function"><span class="keyword">function</span>(<span class="params">&#123; results &#125;</span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">          <span class="keyword">var</span> COUNT_CONTAINER_REF = <span class="string">&#x27;.leancloud-visitors-count&#x27;</span>;</span></span><br><span class="line"><span class="javascript"></span></span><br><span class="line"><span class="javascript">          <span class="keyword">if</span> (results.length === <span class="number">0</span>) &#123;</span></span><br><span class="line"><span class="javascript">            $visitors.find(COUNT_CONTAINER_REF).text(<span class="number">0</span>);</span></span><br><span class="line"><span class="javascript">            <span class="keyword">return</span>;</span></span><br><span class="line"><span class="javascript">          &#125;</span></span><br><span class="line"><span class="javascript"></span></span><br><span class="line"><span class="javascript">          <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; results.length; i++) &#123;</span></span><br><span class="line"><span class="javascript">            <span class="keyword">var</span> item = results[i];</span></span><br><span class="line"><span class="javascript">            <span class="keyword">var</span> url = item.url;</span></span><br><span class="line"><span class="javascript">            <span class="keyword">var</span> time = item.time;</span></span><br><span class="line"><span class="javascript">            <span class="keyword">var</span> element = <span class="built_in">document</span>.getElementById(url);</span></span><br><span class="line"><span class="javascript"></span></span><br><span class="line"><span class="javascript">            $(element).find(COUNT_CONTAINER_REF).text(time);</span></span><br><span class="line"><span class="javascript">          &#125;</span></span><br><span class="line"><span class="javascript">          <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; entries.length; i++) &#123;</span></span><br><span class="line"><span class="javascript">            <span class="keyword">var</span> url = entries[i];</span></span><br><span class="line"><span class="javascript">            <span class="keyword">var</span> element = <span class="built_in">document</span>.getElementById(url);</span></span><br><span class="line"><span class="javascript">            <span class="keyword">var</span> countSpan = $(element).find(COUNT_CONTAINER_REF);</span></span><br><span class="line"><span class="javascript">            <span class="keyword">if</span> (countSpan.text() == <span class="string">&#x27;&#x27;</span>) &#123;</span></span><br><span class="line"><span class="javascript">              countSpan.text(<span class="number">0</span>);</span></span><br><span class="line"><span class="javascript">            &#125;</span></span><br><span class="line"><span class="javascript">          &#125;</span></span><br><span class="line"><span class="javascript">        &#125;)</span></span><br><span class="line"><span class="javascript">        .fail(<span class="function"><span class="keyword">function</span> (<span class="params">&#123; responseJSON &#125;</span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">          <span class="built_in">console</span>.log(<span class="string">&#x27;LeanCloud Counter Error: &#x27;</span> + responseJSON.code + <span class="string">&#x27; &#x27;</span> + responseJSON.error);</span></span><br><span class="line"><span class="javascript">        &#125;);</span></span><br><span class="line"><span class="javascript">    &#125;</span></span><br><span class="line"><span class="javascript">    &#123;% endif %&#125;</span></span><br><span class="line"><span class="javascript"></span></span><br><span class="line"><span class="javascript">    $(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">      $.get(<span class="string">&#x27;https://app-router.leancloud.cn/2/route?appId=&#x27;</span> + <span class="string">&#x27;&#123;&#123; theme.leancloud_visitors.app_id &#125;&#125;&#x27;</span>)</span></span><br><span class="line"><span class="javascript">        .done(<span class="function"><span class="keyword">function</span>(<span class="params">&#123; api_server &#125;</span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">          <span class="keyword">var</span> Counter = <span class="function"><span class="keyword">function</span>(<span class="params">method, url, data</span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">            <span class="keyword">return</span> $.ajax(&#123;</span></span><br><span class="line"><span class="javascript">              <span class="attr">method</span>: method,</span></span><br><span class="line"><span class="javascript">              <span class="attr">url</span>: <span class="string">&#x27;https://&#x27;</span> + api_server + <span class="string">&#x27;/1.1&#x27;</span> + url,</span></span><br><span class="line"><span class="javascript">              <span class="attr">headers</span>: &#123;</span></span><br><span class="line"><span class="javascript">                <span class="string">&#x27;X-LC-Id&#x27;</span>: <span class="string">&#x27;&#123;&#123; theme.leancloud_visitors.app_id &#125;&#125;&#x27;</span>,</span></span><br><span class="line"><span class="javascript">                <span class="string">&#x27;X-LC-Key&#x27;</span>: <span class="string">&#x27;&#123;&#123; theme.leancloud_visitors.app_key &#125;&#125;&#x27;</span>,</span></span><br><span class="line"><span class="javascript">                <span class="string">&#x27;Content-Type&#x27;</span>: <span class="string">&#x27;application/json&#x27;</span>,</span></span><br><span class="line"><span class="javascript">              &#125;,</span></span><br><span class="line"><span class="javascript">              <span class="attr">data</span>: data</span></span><br><span class="line"><span class="javascript">            &#125;);</span></span><br><span class="line"><span class="javascript">          &#125;;</span></span><br><span class="line"><span class="javascript">          &#123;% <span class="keyword">if</span> page.layout === <span class="string">&#x27;post&#x27;</span> %&#125;</span></span><br><span class="line"><span class="javascript">            <span class="keyword">const</span> localhost = <span class="regexp">/http:\/\/(localhost|127.0.0.1|0.0.0.0)/</span>;</span></span><br><span class="line"><span class="javascript">            <span class="keyword">if</span> (localhost.test(<span class="built_in">document</span>.URL)) <span class="keyword">return</span>;</span></span><br><span class="line"><span class="javascript">            addCount(Counter);</span></span><br><span class="line"><span class="javascript">          &#123;% <span class="keyword">else</span> %&#125;</span></span><br><span class="line"><span class="javascript">            <span class="keyword">if</span> ($(<span class="string">&#x27;.post-title-link&#x27;</span>).length &gt;= <span class="number">1</span>) &#123;</span></span><br><span class="line"><span class="javascript">              showTime(Counter);</span></span><br><span class="line"><span class="javascript">            &#125;</span></span><br><span class="line"><span class="javascript">          &#123;% endif %&#125;</span></span><br><span class="line"><span class="javascript">        &#125;);</span></span><br><span class="line"><span class="javascript">    &#125;);</span></span><br><span class="line"><span class="javascript">  </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line">&#123;% endif %&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h3 id="4-底部卜算子不显示访问人数和访问总量："><a href="#4-底部卜算子不显示访问人数和访问总量：" class="headerlink" title="4.底部卜算子不显示访问人数和访问总量："></a>4.底部卜算子不显示访问人数和访问总量：</h3><p>修改next-layout-_third-party-analytics-busuanzi-counter.swig<br>为：</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">async</span> <span class="attr">src</span>=<span class="string">&quot;https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>前端</category>
      </categories>
  </entry>
</search>
